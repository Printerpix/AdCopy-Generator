<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pipeline Configuration - Ad-Creative Pipeline</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .nav-links {
            text-align: center;
            margin-bottom: 2rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            margin: 0 1rem;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            transition: background 0.3s ease;
        }

        .nav-links a:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .nav-links a.active {
            background: rgba(255, 255, 255, 0.3);
        }

        .dashboard {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .config-section {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
        }

        .config-section h3 {
            margin-bottom: 1.5rem;
            color: #333;
            font-size: 1.3rem;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem;
        }

        .input-group {
            display: flex;
            gap: 1rem;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .input-group label {
            font-weight: 600;
            color: #6c757d;
            min-width: 150px;
        }

        .input-group input,
        .input-group select {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            min-width: 250px;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            min-width: auto;
        }

        .checkbox-group span {
            color: #6c757d;
            font-size: 0.9rem;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }

        .btn {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #6c757d;
            border: 2px solid #e9ecef;
        }

        .btn-secondary:hover:not(:disabled) {
            background: #e9ecef;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            display: none;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            display: none;
        }

        .config-preview {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .config-preview h4 {
            margin-bottom: 1rem;
            color: #333;
        }

        .config-preview pre {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.9rem;
            color: #333;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .input-group {
                flex-direction: column;
                align-items: stretch;
            }

            .input-group label {
                min-width: auto;
            }

            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>Pipeline Configuration</h1>
            <p>Configure data sources and pipeline settings</p>
        </div>

        <div class="nav-links">
            <a href="#" onclick="showView('pipeline')">Pipeline Dashboard</a>
            <a href="#" onclick="showView('insights')">Insights Management</a>
            <a href="#" onclick="showView('config')" class="active">Configuration</a>
        </div>

        <div class="dashboard">
            <div id="success-message" class="success-message"></div>
            <div id="error-message" class="error-message"></div>

            <div class="config-section">
                <h3>Reddit Data Source</h3>
                <div class="input-group">
                    <label for="subreddits">Subreddits:</label>
                    <input type="text" id="subreddits" placeholder="ppc, marketing, advertising" value="ppc">
                </div>
                <div class="input-group">
                    <label for="postLimit">Post Limit:</label>
                    <input type="number" id="postLimit" placeholder="20" value="20" min="1" max="100">
                </div>
                <div class="input-group">
                    <label for="timeFilter">Time Filter:</label>
                    <select id="timeFilter">
                        <option value="hour">Past Hour</option>
                        <option value="day">Past Day</option>
                        <option value="week" selected>Past Week</option>
                        <option value="month">Past Month</option>
                        <option value="year">Past Year</option>
                        <option value="all">All Time</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="sortBy">Sort By:</label>
                    <select id="sortBy">
                        <option value="hot" selected>Hot</option>
                        <option value="new">New</option>
                        <option value="top">Top</option>
                        <option value="rising">Rising</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="includeComments">Include Comments:</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="includeComments" checked>
                        <span>Scrape comments from each post</span>
                    </div>
                </div>
                <div class="input-group">
                    <label for="maxComments">Max Comments:</label>
                    <input type="number" id="maxComments" placeholder="10" value="10" min="1" max="50">
                </div>
            </div>

            <div class="config-section">
                <h3>Web Scraping (Coming Soon)</h3>
                <div class="input-group">
                    <label for="webEnabled">Enable Web Scraping:</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="webEnabled" disabled>
                        <span>Scrape content from web sources</span>
                    </div>
                </div>
                <div class="input-group">
                    <label for="webUrls">URLs to Scrape:</label>
                    <input type="text" id="webUrls" placeholder="https://example.com, https://another.com" disabled>
                </div>
            </div>

            <div class="config-section">
                <h3>API Sources (Coming Soon)</h3>
                <div class="input-group">
                    <label for="apiEnabled">Enable API Sources:</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="apiEnabled" disabled>
                        <span>Collect data from API endpoints</span>
                    </div>
                </div>
                <div class="input-group">
                    <label for="apiEndpoints">API Endpoints:</label>
                    <input type="text" id="apiEndpoints" placeholder="https://api.example.com/data" disabled>
                </div>
            </div>

            <div class="button-group">
                <button id="saveConfigBtn" class="btn btn-primary">Save Configuration</button>
                <button id="resetConfigBtn" class="btn btn-secondary">Reset to Defaults</button>
                <button id="testConfigBtn" class="btn btn-secondary">Test Configuration</button>
            </div>


        </div>
    </div>

    <script>
        // Configuration object
        let config = {
            sources: {
                reddit: {
                    enabled: true,
                    subreddits: ['ppc'],
                    limit: 20,
                    time_filter: 'week',
                    sort: 'hot',
                    include_comments: true,
                    max_comments: 10
                },
                web: {
                    enabled: false,
                    urls: []
                },
                apis: {
                    enabled: false,
                    endpoints: []
                }
            }
        };

        // DOM elements
        const subredditsInput = document.getElementById('subreddits');
        const postLimitInput = document.getElementById('postLimit');
        const timeFilterSelect = document.getElementById('timeFilter');
        const sortBySelect = document.getElementById('sortBy');
        const includeCommentsCheckbox = document.getElementById('includeComments');
        const maxCommentsInput = document.getElementById('maxComments');
        const successMessage = document.getElementById('success-message');
        const errorMessage = document.getElementById('error-message');

        // Event listeners
        document.getElementById('saveConfigBtn').addEventListener('click', saveConfiguration);
        document.getElementById('resetConfigBtn').addEventListener('click', resetConfiguration);
        document.getElementById('testConfigBtn').addEventListener('click', testConfiguration);



        function updateConfigFromForm() {
            const subreddits = subredditsInput.value.split(',').map(s => s.trim()).filter(s => s.length > 0);
            
            config.sources.reddit = {
                enabled: true,
                subreddits: subreddits,
                limit: parseInt(postLimitInput.value) || 20,
                time_filter: timeFilterSelect.value,
                sort: sortBySelect.value,
                include_comments: includeCommentsCheckbox.checked,
                max_comments: parseInt(maxCommentsInput.value) || 10
            };
        }



        function saveConfiguration() {
            updateConfigFromForm();
            
            // Save to localStorage
            localStorage.setItem('pipelineConfig', JSON.stringify(config));
            
            showMessage('Configuration saved successfully!', 'success');
        }

        function resetConfiguration() {
            // Reset to defaults
            subredditsInput.value = 'ppc';
            postLimitInput.value = '20';
            timeFilterSelect.value = 'week';
            sortBySelect.value = 'hot';
            includeCommentsCheckbox.checked = true;
            maxCommentsInput.value = '10';
            
            showMessage('Configuration reset to defaults', 'success');
        }

        function testConfiguration() {
            updateConfigFromForm();
            
            if (config.sources.reddit.subreddits.length === 0) {
                showMessage('Please enter at least one subreddit', 'error');
                return;
            }
            
            if (config.sources.reddit.limit < 1 || config.sources.reddit.limit > 100) {
                showMessage('Post limit must be between 1 and 100', 'error');
                return;
            }
            
            if (config.sources.reddit.max_comments < 1 || config.sources.reddit.max_comments > 50) {
                showMessage('Max comments must be between 1 and 50', 'error');
                return;
            }
            
            showMessage('Configuration is valid!', 'success');
        }

        function showMessage(message, type) {
            const messageElement = type === 'success' ? successMessage : errorMessage;
            const otherElement = type === 'success' ? errorMessage : successMessage;
            
            otherElement.style.display = 'none';
            messageElement.textContent = message;
            messageElement.style.display = 'block';
            
            setTimeout(() => {
                messageElement.style.display = 'none';
            }, 3000);
        }

        function showView(view) {
            // This function will be used for navigation between views
            if (view === 'pipeline') {
                window.location.href = '/';
            } else if (view === 'insights') {
                window.location.href = '/insights';
            } else if (view === 'config') {
                // Already on config page
                return;
            }
        }

        // Load saved configuration on page load
        document.addEventListener('DOMContentLoaded', function() {
            const savedConfig = localStorage.getItem('pipelineConfig');
            if (savedConfig) {
                try {
                    config = JSON.parse(savedConfig);
                    
                    // Update form with saved values
                    subredditsInput.value = config.sources.reddit.subreddits.join(', ');
                    postLimitInput.value = config.sources.reddit.limit;
                    timeFilterSelect.value = config.sources.reddit.time_filter;
                    sortBySelect.value = config.sources.reddit.sort;
                    includeCommentsCheckbox.checked = config.sources.reddit.include_comments;
                    maxCommentsInput.value = config.sources.reddit.max_comments;
                } catch (e) {
                    console.error('Error loading saved configuration:', e);
                }
            }
        });
    </script>
</body>

</html>